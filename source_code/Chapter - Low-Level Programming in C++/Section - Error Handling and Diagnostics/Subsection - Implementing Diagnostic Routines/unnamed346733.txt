bool testMemory() {
    volatile uint8_t* memory = reinterpret_cast(0x2000);
    for (int i = 0; i < 1024; ++i) {
        memory[i] = 0xAA;
        if (memory[i] != 0xAA) return false;
        memory[i] = 0x55;
        if (memory[i] != 0x55) return false;
    }
    return true;
}

void startupSelfTest() {
    if (!testMemory()) {
        LOG("Error: Memory test failed!");
        systemHalt();
    }
}