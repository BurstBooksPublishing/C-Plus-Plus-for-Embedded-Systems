template
T read_register(volatile T* reg) {
    return *reg;
}